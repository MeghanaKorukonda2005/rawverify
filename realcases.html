<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Construction Co-pilot Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body { margin:0; font-family:'Poppins',sans-serif; background:#f9f9f9; color:#333; }
  h1,h2 { text-align:center; color:#222; }
  .tabs { display:flex; justify-content:center; margin:20px; flex-wrap:wrap; }
  .tab { background:#eee; padding:10px 20px; margin:5px; border-radius:8px; cursor:pointer; transition:0.3s; }
  .tab.active { background:#ff4d4d; color:#fff; }
  .content { display:none; padding:20px; }
  .content.active { display:block; }
  .section { display:grid; grid-template-columns:2fr 1fr; gap:20px; margin-top:20px; }
  table { width:100%; border-collapse:collapse; background:#fff; border-radius:8px; overflow:hidden; box-shadow:0 2px 5px rgba(0,0,0,0.1);}
  th,td { padding:12px; text-align:left; border-bottom:1px solid #ddd; }
  th { background:#f2f2f2; }
  tr:hover { background:#f9f9f9; cursor:pointer; }

  #chatPanel { position:fixed; top:0; right:-550px; width:550px; height:100%; background:#fff; color:#222; padding:20px; box-shadow:-3px 0 10px rgba(0,0,0,0.3); transition:0.4s; display:flex; flex-direction:column; z-index:999; }
  #chatPanel h3 { margin-top:0; color:#ff4d4d; }
  #closeChat { align-self:flex-end; background:#ff4d4d; border:none; color:#fff; padding:5px 10px; border-radius:4px; cursor:pointer; }
  .chatMessages { flex:1; overflow-y:auto; display:flex; flex-direction:column; gap:10px; margin-top:10px; }
  .message { padding:10px 15px; border-radius:12px; max-width:90%; word-wrap:break-word; }
  .message.user { align-self:flex-end; background:#ff4d4d; color:#fff; }
  .message.bot { align-self:flex-start; background:#eee; color:#222; }
  .message img { width:100%; border-radius:8px; margin-top:5px; }
  canvas { background:#fff; border-radius:8px; padding:10px; margin-top:10px; }
</style>
</head>
<body>

<h1>üèó Construction Projects Dashboard</h1>
<div class="tabs">
  <div class="tab active" data-target="scams">Corruption Scams</div>
  <div class="tab" data-target="failures">Failed Projects</div>
  <div class="tab" data-target="success">Successful Projects</div>
</div>

<!-- Corruption Scams -->
<div class="content active" id="scams">
  <div class="section">
    <table id="scamsTable">
      <thead>
        <tr><th>Project / Scam</th><th>Location</th><th>Amount</th><th>Fraud Type</th><th>Year</th></tr>
      </thead>
      <tbody></tbody>
    </table>
    <div>
      <canvas id="scamPie" height="200"></canvas>
      <canvas id="scamLine" height="200"></canvas>
    </div>
  </div>
</div>

<!-- Failed Projects -->
<div class="content" id="failures">
  <div class="section">
    <table id="failuresTable">
      <thead>
        <tr><th>Project</th><th>Location</th><th>Cost</th><th>Reason</th><th>Year</th></tr>
      </thead>
      <tbody></tbody>
    </table>
    <div>
      <canvas id="failPie" height="200"></canvas>
      <canvas id="failLine" height="200"></canvas>
    </div>
  </div>
</div>

<!-- Successful Projects -->
<div class="content" id="success">
  <div class="section">
    <table id="successTable">
      <thead>
        <tr><th>Project</th><th>Location</th><th>Cost</th><th>Completion Year</th><th>Remarks</th></tr>
      </thead>
      <tbody></tbody>
    </table>
    <div>
      <canvas id="successPie" height="200"></canvas>
      <canvas id="successLine" height="200"></canvas>
    </div>
  </div>
</div>

<!-- Chatbot Sidebar -->
<div id="chatPanel">
  <button id="closeChat">X</button>
  <h3 id="chatTitle"></h3>
  <div class="chatMessages" id="chatMessages"></div>
</div>

<script>
// ==== Sample Data ====

// Corruption Scams
const scamsData = [
  {name:"Commonwealth Games Scam", location:"Delhi, India", amount:"‚Çπ70,000 Cr", type:"Contract Fraud", year:"2010", details:"The Commonwealth Games Scam involved widespread financial mismanagement, inflated contracts, favoritism in tenders, and major losses to the government.", impact:"Multiple arrests, lengthy trials, reputational damage for India.", keyFigures:"Suresh Kalmadi", images:["https://upload.wikimedia.org/wikipedia/commons/f/f7/2010_Commonwealth_Games_Opening_Ceremony.jpg"]},
  {name:"Adarsh Housing Scam", location:"Mumbai, India", amount:"‚Çπ1,000+ Cr", type:"Land Scam", year:"2010", details:"Illegal land allotment and violations of coastal regulations.", impact:"Officials benefited illegally, legal cases ongoing.", keyFigures:"Politicians & Bureaucrats", images:["https://upload.wikimedia.org/wikipedia/commons/7/7d/Adarsh_Housing.jpg"]},
  {name:"Noida Land Scam", location:"Noida, India", amount:"‚Çπ10,000+ Cr", type:"Land Scam", year:"2011", details:"Public land acquired cheaply and resold to developers.", impact:"Legal disputes and public protests.", keyFigures:"Developers & Officials", images:[]},
  {name:"Yamuna Expressway Scam", location:"Uttar Pradesh, India", amount:"‚Çπ5,000 Cr", type:"Land Scam", year:"2011", details:"Farmers' land illegally sold to private developers.", impact:"Construction halted and public protests.", keyFigures:"State Officials", images:[]},
  {name:"Patna Bridge Scam", location:"Patna, India", amount:"‚Çπ3,200 Cr", type:"Contract Fraud", year:"2014", details:"Over-invoicing and delays in bridge construction.", impact:"Delayed transport network.", keyFigures:"Contractors & Officials", images:[]},
  {name:"Kolkata Housing Scam", location:"Kolkata, India", amount:"‚Çπ2,500 Cr", type:"Land Scam", year:"2012", details:"Illegal land conversion and allotment.", impact:"Legal actions and fines.", keyFigures:"Local Politicians", images:[]},
  {name:"Gomti Riverfront Scam", location:"Lucknow, India", amount:"‚Çπ1,513 Cr", type:"Tender Fraud", year:"2017", details:"Irregular tendering and substandard work.", impact:"Quality issues in riverfront development.", keyFigures:"Officials & Contractors", images:[]},
  {name:"Chennai IT Corridor Scam", location:"Chennai, India", amount:"‚Çπ4,000 Cr", type:"Contract Fraud", year:"2013", details:"Overpayment for IT infrastructure construction.", impact:"Delays and public scrutiny.", keyFigures:"Corporates & Officials", images:[]},
  {name:"Bihar Road Scam", location:"Bihar, India", amount:"‚Çπ2,800 Cr", type:"Contract Fraud", year:"2015", details:"Substandard road construction and bribery.", impact:"Road collapses and litigation.", keyFigures:"Engineers & Contractors", images:[]},
  {name:"Punjab Land Grab", location:"Punjab, India", amount:"‚Çπ3,600 Cr", type:"Land Scam", year:"2016", details:"Illegal acquisition of farmers' land for industrial projects.", impact:"Legal disputes and protests.", keyFigures:"Politicians", images:[]}
];

// Failed Projects
const failuresData = [
  {name:"Velachery MRTS", location:"Chennai", cost:"‚Çπ800 Cr", reason:"Design Flaws", year:"2003‚Äìnow", details:"Poor soil study, design flaws, project incomplete for decades.", impact:"Project delayed and incomplete.", keyFigures:"Urban Planners", images:[]},
  {name:"Delhi Airport T3 Roof Collapse", location:"Delhi", cost:"‚Çπ12,700 Cr", reason:"Structural Failure", year:"2016", details:"Roof collapsed during rain due to bad drainage.", impact:"Safety hazard, repair costs.", keyFigures:"Construction Engineers", images:[]},
  {name:"Chennai Metro Phase-1", location:"Chennai", cost:"‚Çπ14,600 Cr", reason:"Delays", year:"2010‚Äì2020", details:"Delays, planning errors, cost overruns.", impact:"Public inconvenience and extra costs.", keyFigures:"Metro Authority", images:[]},
  {name:"Bangalore Steel Flyover", location:"Bengaluru", cost:"‚Çπ1,800 Cr", reason:"Public Opposition", year:"2017", details:"Environmental and public protests halted construction.", impact:"Project halted or redesigned.", keyFigures:"City Engineers & Activists", images:[]},
  {name:"Mumbai Coastal Road Project", location:"Mumbai", cost:"‚Çπ12,000 Cr", reason:"Legal & Environmental Issues", year:"2015‚Äì2022", details:"Delayed due to environmental lawsuits.", impact:"Cost overruns and delayed completion.", keyFigures:"Mumbai Municipal Corporation", images:[]},
  {name:"Kolkata Riverfront Project", location:"Kolkata", cost:"‚Çπ2,500 Cr", reason:"Budget Overrun", year:"2012‚Äì2018", details:"Excessive cost escalation and mismanagement.", impact:"Delayed completion and public dissatisfaction.", keyFigures:"Municipal Authorities", images:[]},
  {name:"Ahmedabad Ring Road", location:"Ahmedabad", cost:"‚Çπ3,300 Cr", reason:"Land Acquisition Issues", year:"2014‚Äì2020", details:"Project stalled due to disputes with local farmers.", impact:"Construction delays and extra cost.", keyFigures:"State Government", images:[]}
];

// Successful Projects
const successData = [
  {name:"Mumbai Metro Phase 1", location:"Mumbai, India", cost:"‚Çπ12,000 Cr", year:"2014", remarks:"Completed on time with modern infrastructure.", details:"Metro project successfully completed improving public transport.", impact:"High public utility, timely completion.", keyFigures:"Mumbai Metro Rail Corporation", images:[]},
  {name:"Delhi Metro Phase 3", location:"Delhi, India", cost:"‚Çπ20,000 Cr", year:"2011‚Äì2014", remarks:"Efficiently executed with multiple lines operational.", details:"Expansion of Delhi Metro with modern technology and safety standards.", impact:"Reduced traffic congestion and pollution.", keyFigures:"Delhi Metro Rail Corporation", images:[]},
  {name:"Bangalore Namma Metro", location:"Bengaluru, India", cost:"‚Çπ14,000 Cr", year:"2011‚Äì2017", remarks:"Completed in phases, punctual and effective.", details:"Namma Metro improved public transit and city connectivity.", impact:"Enhanced urban mobility.", keyFigures:"Bangalore Metro Rail Corporation", images:[]},
  {name:"Pune Metro Project", location:"Pune, India", cost:"‚Çπ11,500 Cr", year:"2016‚Äì2023", remarks:"Modern metro system operational in city.", details:"Infrastructure project executed successfully with minimal delays.", impact:"Improved urban transport.", keyFigures:"Pune Metro Rail Corporation", images:[]},
  {name:"Hyderabad Metro", location:"Hyderabad, India", cost:"‚Çπ15,500 Cr", year:"2012‚Äì2020", remarks:"Efficient urban transit system.", details:"Metro lines completed in phases, reducing traffic congestion.", impact:"Public transport significantly improved.", keyFigures:"Hyderabad Metro Rail", images:[]}
];

// ==== Populate Tables ====
function populateTable(tableId, data, type){
  const tbody = document.getElementById(tableId).querySelector('tbody');
  tbody.innerHTML='';
  data.forEach(item=>{
    const row = tbody.insertRow();
    if(type==='scam'){
      row.innerHTML = `<td>${item.name}</td><td>${item.location}</td><td>${item.amount}</td><td>${item.type}</td><td>${item.year}</td>`;
    } else if(type==='failure'){
      row.innerHTML = `<td>${item.name}</td><td>${item.location}</td><td>${item.cost}</td><td>${item.reason}</td><td>${item.year}</td>`;
    } else {
      row.innerHTML = `<td>${item.name}</td><td>${item.location}</td><td>${item.cost}</td><td>${item.year}</td><td>${item.remarks}</td>`;
    }
    row.onclick = ()=>openChatBot(item);
  });
}
populateTable('scamsTable', scamsData, 'scam');
populateTable('failuresTable', failuresData, 'failure');
populateTable('successTable', successData, 'success');

// ==== Tabs ====
document.querySelectorAll('.tab').forEach(tab=>{
  tab.addEventListener('click',()=>{
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.querySelectorAll('.content').forEach(c=>c.classList.remove('active'));
    tab.classList.add('active');
    document.getElementById(tab.dataset.target).classList.add('active');
  });
});

// ==== Chatbot Sidebar ====
const chatPanel = document.getElementById('chatPanel');
const chatTitle = document.getElementById('chatTitle');
const chatMessages = document.getElementById('chatMessages');
document.getElementById('closeChat').onclick = ()=>{ chatPanel.style.right='-550px'; }

function addBotMessage(text){
  return new Promise(resolve=>{
    const div = document.createElement('div');
    div.className='message bot';
    div.innerText='';
    chatMessages.appendChild(div);
    chatMessages.scrollTop = chatMessages.scrollHeight;
    let i=0;
    const interval = setInterval(()=>{
      if(i<text.length){ div.innerText+=text[i]; i++; chatMessages.scrollTop = chatMessages.scrollHeight; }
      else { clearInterval(interval); resolve(); }
    },15);
  });
}

async function openChatBot(item){
  chatTitle.innerText = item.name;
  chatMessages.innerHTML = '';
  chatPanel.style.right = '0';
  if(item.details) await addBotMessage(`Overview: ${item.details}`);
  if(item.year) await addBotMessage(`Year: ${item.year}`);
  if(item.location) await addBotMessage(`Location: ${item.location}`);
  if(item.amount) await addBotMessage(`Amount Invested: ${item.amount}`);
  if(item.cost) await addBotMessage(`Cost: ${item.cost}`);
  if(item.type) await addBotMessage(`Type/Fraud: ${item.type}`);
  if(item.reason) await addBotMessage(`Reason: ${item.reason}`);
  if(item.impact) await addBotMessage(`Impact: ${item.impact}`);
  if(item.keyFigures) await addBotMessage(`Key Figures: ${item.keyFigures}`);
  if(item.images && item.images.length>0){
    for(let img of item.images){
      const div = document.createElement('div');
      const image = document.createElement('img');
      image.src = img;
      div.appendChild(image);
      div.className='message bot';
      chatMessages.appendChild(div);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      await new Promise(r=>setTimeout(r,300));
    }
  }
}

// ==== Charts ====
function parseAmount(str){
  return parseInt(str.replace(/‚Çπ|,| Cr|\+/g,'')) || 0;
}
function generateCharts(){
  // Scams Charts
  const scamTypes = [...new Set(scamsData.map(s=>s.type))];
  const scamCounts = scamTypes.map(t=>scamsData.filter(s=>s.type===t).length);
  const scamAmounts = scamsData.map(s=>parseAmount(s.amount));
  new Chart(document.getElementById('scamPie'), {type:'pie', data:{labels:scamTypes, datasets:[{data:scamCounts, backgroundColor:['#ff4d4d','#ffa64d','#4da6ff','#ffb84d','#a64dff']}]}});  
  new Chart(document.getElementById('scamLine'), {type:'line', data:{labels:scamsData.map(s=>s.name), datasets:[{label:'‚Çπ Cr', data:scamAmounts, borderColor:'#ff4d4d', backgroundColor:'rgba(255,77,77,0.2)'}]}, options:{scales:{y:{beginAtZero:true}}}});

  // Failures Charts
  const failReasons = [...new Set(failuresData.map(f=>f.reason))];
  const failCounts = failReasons.map(r=>failuresData.filter(f=>f.reason===r).length);
  const failCosts = failuresData.map(f=>parseAmount(f.cost));
  new Chart(document.getElementById('failPie'), {type:'pie', data:{labels:failReasons, datasets:[{data:failCounts, backgroundColor:['#ffa64d','#ff4d4d','#4da6ff','#ffff4d','#a64dff']}]}});  
  new Chart(document.getElementById('failLine'), {type:'line', data:{labels:failuresData.map(f=>f.name), datasets:[{label:'‚Çπ Cr', data:failCosts, borderColor:'#ffa64d', backgroundColor:'rgba(255,166,77,0.2)'}]}, options:{scales:{y:{beginAtZero:true}}}});

  // Success Charts
  new Chart(document.getElementById('successPie'), {type:'pie', data:{labels:successData.map(s=>s.name), datasets:[{data:successData.map(()=>1), backgroundColor:['#4da6ff','#4dff4d','#ff4ddf','#ffb84d','#ffa64d']}]}});  
  const successCosts = successData.map(s=>parseAmount(s.cost));
  new Chart(document.getElementById('successLine'), {type:'line', data:{labels:successData.map(s=>s.name), datasets:[{label:'‚Çπ Cr', data:successCosts, borderColor:'#4da6ff', backgroundColor:'rgba(77,166,255,0.2)'}]}, options:{scales:{y:{beginAtZero:true}}}});
}
generateCharts();
</script>

</body>
</html>
